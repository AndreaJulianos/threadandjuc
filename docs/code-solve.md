### 三高demo系统解读

 _三高系统是一个利用多线程来进行导入 ，查询 等操作的一个系统，虽然只有简单的单元测试但是相比较一些小的demo的例子而言，它很完整的展示了在大数据量的面前我们如何
 能做到更好的使用多线程，是一个进阶系统，利用写的一些示例来完成对一些比较复杂的多线程的方法的使用! 希望大家能够多多参加进来，完善此系统!_
 
 1.数据如何分片?
 
      分片方法有很多种，这里面我就介绍下，我的分片方法，当然你可以用你的分片方法实现此功能，这都无所谓！有兴趣的可以联系我！
      已 point 表为例,取point表的id 最大值按照每个范围区间进行取余预算,然后id从0开始，进行 区间+
      例如区间为1000 则数据为： 0-1000 ， 1000-2000 ， 2000-3000 最后一位的数字如果有余数则多加1
      详情请看三高系统 queryPointSteps 

  2.表的设计与思考?
  
      因为考虑数据量大，如果利用多线程那么当其中一个发生错误则可能全军覆没，所以想设计成批次，如果一个数据发生错误那么直影响这个一批次的数据量
      id为3的发生错误则，只影响0-1000其他批次继续
      表分为： import_data_task 记录任务 import_data_step 记录任务批次 import_xxx_日期 记录导入数据 详情见表sql
  

  3.如何实现高可用?
  
      在三高系统中有重试机制，因为每次定时任务每次查询的为未开始和发生错误的数据，那么无论多少次数据都是可以不断的去查询去重试，
      任务结束后，又发生错误的数据会继续重试，但是只会重试当前批次，不会影响其他批次，实现了高可用！
      
  4.如何实现高性能?
  
      利用批次导入，再多线程的情况下会比单线程导入数据更加快速,提升性能大概几倍左右，系统给出了利用多线程的countdowmlatch,线程池
      ,future ....来进行导入 让大家理解更透彻
      
  5.如何实现高可靠?
      
      错误批次发生错误会不断重试，不会影响其他批次数据，在发生异常后，会有报警系统，让系统管理者即时处理!
      
  6.如何自定义线程池以及使用与导入 ?
  
     基础请看线程池精讲,使用与导入请看TimerRunner2 ....等
     
  7.如何利用CountDownLatch使用与导入?
  
     基础请看CountDownLatch ,使用与导入请看TimerRunner2
     
  8.如何控制数据一致性? 
  
     利用了手动事务,在需要插入的数据中进行手动事务.
     
 ![整体流程](https://raw.githubusercontent.com/qiurunze123/imageall/master/threadnew65.png)

  9.如何是实现幂等性? 
  
     幂等操作的特点是其任意多次执行所产生的影响均与一次执行的影响相同,本系统无论多少次执行都不会影响已经导入的数据！
     
  10.如何使用ForkJoin进行使用与导入?
  
    未更新
    
  11.如何使用栅栏进行使用与导入?
  
     基础请看CyclicBarrier ,使用与导入请看TimerRunner3
     
  12.数据的导入性能 -- 数据 ?
  
    未更新
    
  13.为什么需要一个环境隔离系统来维护环境数据?
  
    未更新
    
  14.定时任务的开启与一些小的技巧?
  
    定时任务配置频率不要太频繁,尽量要搞清自己的数据大概时间，要设置结束为标志，这样可以节省性能与实践！
    
  15.服务波动怎么解决数据不丢失?
  
    数据报警后，再次开启定时任务，因为数据可重试，则继续导入！
    
  16.数据报警?(简单版)?
  
    