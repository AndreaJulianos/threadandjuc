# Java并发多线程

注：以下内容基于版本

```properties
java多线程基础
java多线程安全
java多线程jmm内存模型
java多线程juc
```



### 一、java多线程基础

1. ##### 开篇题

 实现多线程的方式有几种方式? 
 
 https://github.com/qiurunze123/threadandjuc/blob/master/docs/thread-base-000.md

 threadbase
 
2. ##### 多线程状态流转

 有哪些不同的多线程生命周期? 
 https://github.com/qiurunze123/threadandjuc/blob/master/docs/thread-base-003-1.md 
 https://github.com/qiurunze123/threadandjuc/blob/master/docs/thread-base-003.md
 
 threadstate

3. ##### Thread和Object -- 说一说
 
 为什么线程通信的方法wait(),notify()和notifyall() 被定义在Object类里? 而 sleep定义在Thread类里?
   
 讲解 wait notify notifyall（很多并发工具类的原理）
 
 threadandobject 
   
### 线程安全问题

1. ##### 什么是线程安全？？

 当多个线程访问某个方法时，不管你通过怎样的调用方式或者说这些线程如何交替的执行，
 我们在主程序中不需要去做任何的同步，都不需要进行额外的处理,这个类的结果行为都是我们设想的正确行为
 那么我们就可以说这个类时线程安全的
 
 线程不安全： get同时set 额外同步
 1.数据争用：同时写数据 就会造成数据脏数据
 2.竞争条件：比如顺序 线程没没配合好 赞成一个文件还没写完成就来读取
 
 全都线程安全？： 运行成本 设计成本 ConcurrentHashMap (需要更好地设计才设计出来90)

2. ##### 有几类线程安全的问题 
    
    一共有哪几类线程安全问题？
    
    那些场景需要额外注意线程安全问题？？
    
    什么是多线程上下文切换？？

   ![img](https://raw.githubusercontent.com/qiurunze123/imageall/master/threadsafe001.png)

3. ##### 如何避免线程安全问题？？如何解决逸出

   1.运行结果错误 a++ 多线程下出现不准的请求现象
   
   threadsaft -- ThreadError1
   
   解决：返回副本
   
   ![img](https://raw.githubusercontent.com/qiurunze123/imageall/master/threaderror1.png)
   
   2.活跃性问题: 死锁 活锁 饥饿锁 ......
   
   ![img](https://raw.githubusercontent.com/qiurunze123/imageall/master/threaderror2.png)
   
   threadsaft -- ThreadError2
       
   3.对象发布和初始化的时候安全问题

   ![img](https://raw.githubusercontent.com/qiurunze123/imageall/master/threadsafe002-1.png)

   举例：1.在构造函数中未初始化完毕就this赋值
        3.构造函数中运行线程
        
   threadsaft -- ThreadError3 ThreadError4

 总结： 1.访问共享的变量或者资源会有并发风险 比如对象的属性 静态变量 共享缓存 数据库等
 
 2.所有依赖时序的操作 即使每一步操作都是线程安全的 还是存在并发问题：read-modify-write ,check-then-act （检查后行动）
 
 3.不同数据之间存在捆绑关系的时候 （ip和端口号 进行原子合并操作）
 
 4.我们使用其他类的时候 如果对方没有生命自己是线程安全的  比如 hashmap 就提醒是线程不安全的 我们就知道要使用安全的map ConcurrentHashMap

### 线程JMM内存模型

  1. ##### 什么是底层原理?? 为什么出现了java内存模型
  
   https://github.com/qiurunze123/threadandjuc/blob/master/docs/JMM-1.md
   
  2. ##### java内存模型+java对象模型+jvm内存模型
   
   https://github.com/qiurunze123/threadandjuc/blob/master/docs/JMM-1.md

  3. JMM重点内容
     
   https://github.com/qiurunze123/threadandjuc/blob/master/docs/JMM-1.md



